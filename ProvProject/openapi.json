{"openapi":"3.1.0","info":{"title":"Patient Service API","description":"API for managing patients in healthcare system","version":"1.0"},"paths":{"/patients/":{"get":{"tags":["Patients","Patients"],"summary":"List All Patients","description":"Returns a list of all patient profiles.\n- Could be restricted to admin users in the future.","operationId":"list_all_patients_patients__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/PatientOut"},"type":"array","title":"Response List All Patients Patients  Get"}}}}}},"post":{"tags":["Patients","Patients"],"summary":"Create Patient Profile","description":"Create a patient profile for the authenticated user.\n- Only allowed if the user does not already have a patient profile.\n- Returns the created Patient profile.","operationId":"create_patient_profile_patients__post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PatientCreate"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PatientOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/patients/me":{"get":{"tags":["Patients","Patients"],"summary":"Read Current Patient Profile","description":"Returns the current user's patient profile.\n- Uses get_current_patient_or_409 dependency to ensure profile exists.","operationId":"read_current_patient_profile_patients_me_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PatientOut"}}}}},"security":[{"OAuth2PasswordBearer":[]}]},"delete":{"tags":["Patients","Patients"],"summary":"Delete Current Patient Profile","description":"Deletes the current user's patient profile.\n- User record remains; only profile is deleted.","operationId":"delete_current_patient_profile_patients_me_delete","responses":{"204":{"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}]},"patch":{"tags":["Patients","Patients"],"summary":"Update Current Patient Profile","description":"Partially updates the current user's patient profile.\n- Only fields provided in the payload are updated.\n- Password update is ignored here; auth layer handles password changes.","operationId":"update_current_patient_profile_patients_me_patch","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PatientUpdate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PatientOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/auth/signup":{"post":{"tags":["Authentication","Authentication"],"summary":"Signup","description":"User signup endpoint.\n- Takes email + password from request body\n- Hashes the password\n- Stores new Patient in the database","operationId":"signup_auth_signup_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserCreate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/auth/login":{"post":{"tags":["Authentication","Authentication"],"summary":"Login","operationId":"login_auth_login_post","requestBody":{"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/Body_login_auth_login_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/medical-history/":{"get":{"tags":["Medical History","Medical History"],"summary":"Get My Medical History","operationId":"get_my_medical_history_medical_history__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/MedicalHistoryOut"},"type":"array","title":"Response Get My Medical History Medical History  Get"}}}}},"security":[{"OAuth2PasswordBearer":[]}]},"post":{"tags":["Medical History","Medical History"],"summary":"Create Medical History","operationId":"create_medical_history_medical_history__post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MedicalHistoryCreate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MedicalHistoryOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/medical-history/{history_id}":{"put":{"tags":["Medical History","Medical History"],"summary":"Update Medical History","operationId":"update_medical_history_medical_history__history_id__put","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"history_id","in":"path","required":true,"schema":{"type":"integer","title":"History Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MedicalHistoryUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MedicalHistoryOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Medical History","Medical History"],"summary":"Delete Medical History","operationId":"delete_medical_history_medical_history__history_id__delete","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"history_id","in":"path","required":true,"schema":{"type":"integer","title":"History Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/":{"get":{"summary":"Root","operationId":"root__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"Body_login_auth_login_post":{"properties":{"grant_type":{"anyOf":[{"type":"string","pattern":"^password$"},{"type":"null"}],"title":"Grant Type"},"username":{"type":"string","title":"Username"},"password":{"type":"string","format":"password","title":"Password"},"scope":{"type":"string","title":"Scope","default":""},"client_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Id"},"client_secret":{"anyOf":[{"type":"string"},{"type":"null"}],"format":"password","title":"Client Secret"}},"type":"object","required":["username","password"],"title":"Body_login_auth_login_post"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"MedicalHistoryCreate":{"properties":{"condition":{"type":"string","title":"Condition"},"diagnosis_date":{"type":"string","format":"date","title":"Diagnosis Date"},"medications":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Medications"},"allergies":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Allergies"},"treatment":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Treatment"},"notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Notes"}},"type":"object","required":["condition","diagnosis_date"],"title":"MedicalHistoryCreate","description":"Payload for creating a new medical history model"},"MedicalHistoryOut":{"properties":{"condition":{"type":"string","title":"Condition"},"diagnosis_date":{"type":"string","format":"date","title":"Diagnosis Date"},"medications":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Medications"},"allergies":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Allergies"},"treatment":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Treatment"},"notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Notes"},"id":{"type":"integer","title":"Id"}},"type":"object","required":["condition","diagnosis_date","id"],"title":"MedicalHistoryOut","description":"Response model for medical history records."},"MedicalHistoryUpdate":{"properties":{"condition":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Condition"},"diagnosis_date":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Diagnosis Date"},"medications":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Medications"},"allergies":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Allergies"},"treatment":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Treatment"},"notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Notes"}},"type":"object","title":"MedicalHistoryUpdate"},"PatientCreate":{"properties":{"name":{"type":"string","title":"Name"},"age":{"type":"integer","title":"Age"},"dob":{"type":"string","format":"date","title":"Dob"},"gender":{"type":"string","title":"Gender"},"contact_number":{"type":"string","title":"Contact Number"},"email":{"type":"string","format":"email","title":"Email"},"address":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Address"}},"type":"object","required":["name","age","dob","gender","contact_number","email"],"title":"PatientCreate","description":"Payload for creating a new patient record (POST /patients).\nNotice: No password field. Auth is managed separately."},"PatientOut":{"properties":{"name":{"type":"string","title":"Name"},"age":{"type":"integer","title":"Age"},"dob":{"type":"string","format":"date","title":"Dob"},"gender":{"type":"string","title":"Gender"},"contact_number":{"type":"string","title":"Contact Number"},"email":{"type":"string","format":"email","title":"Email"},"address":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Address"},"id":{"type":"integer","title":"Id"}},"type":"object","required":["name","age","dob","gender","contact_number","email","id"],"title":"PatientOut","description":"Response model returned to clients after reading patients."},"PatientUpdate":{"properties":{"name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Name"},"age":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Age"},"dob":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Dob"},"gender":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Gender"},"contact_number":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Contact Number"},"email":{"anyOf":[{"type":"string","format":"email"},{"type":"null"}],"title":"Email"},"address":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Address"}},"type":"object","title":"PatientUpdate","description":"Payload for partial patient updates (PATCH /patients).\nAll fields optional so clients can send only what changes."},"UserCreate":{"properties":{"email":{"type":"string","format":"email","title":"Email"},"password":{"type":"string","title":"Password"}},"type":"object","required":["email","password"],"title":"UserCreate","description":"Signup payload (used only if we manage auth locally)."},"UserResponse":{"properties":{"id":{"type":"integer","title":"Id"},"email":{"type":"string","title":"Email"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["id","email","created_at"],"title":"UserResponse"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}},"securitySchemes":{"OAuth2PasswordBearer":{"type":"oauth2","flows":{"password":{"scopes":{},"tokenUrl":"/auth/login"}}}}}}